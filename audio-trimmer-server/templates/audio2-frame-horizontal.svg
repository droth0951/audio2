<svg width="{{width}}" height="{{height}}" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <defs>
    <!-- Claude Gradient Background (same as vertical) -->
    <linearGradient id="claudeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0a0a0a"/>
      <stop offset="50%" style="stop-color:#1a1a1a"/>
      <stop offset="100%" style="stop-color:#252525"/>
    </linearGradient>

    <!-- Breathing Gradient Backgrounds -->
    <linearGradient id="breathingBackground" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#2d2d2d"/>
      <stop offset="50%" stop-color="#404040"/>
      <stop offset="100%" stop-color="#2d2d2d"/>
    </linearGradient>

    <linearGradient id="progressFill" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#d97706"/>
      <stop offset="50%" stop-color="#f59e0b"/>
      <stop offset="100%" stop-color="#d97706"/>
    </linearGradient>

    <!-- Shadow effects for depth -->
    <filter id="dropShadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="8"/>
      <feOffset dx="0" dy="4" result="offsetblur"/>
      <feFlood flood-color="#000000" flood-opacity="0.5"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Text shadow for better readability -->
    <filter id="textShadow">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="0" dy="2" result="offsetblur"/>
      <feFlood flood-color="#000000" flood-opacity="0.8"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Clip path for artwork (rounded corners with white border) -->
    <clipPath id="artworkClip">
      <rect x="{{artworkInnerX}}" y="{{artworkInnerY}}" width="{{artworkInnerSize}}" height="{{artworkInnerSize}}" rx="12"/>
    </clipPath>
  </defs>

  <!-- Background -->
  <rect width="{{width}}" height="{{height}}" fill="url(#claudeGradient)"/>

  <!-- Subtle vignette for depth -->
  <rect width="{{width}}" height="{{height}}" fill="none" stroke="url(#claudeGradient)" stroke-width="100" opacity="0.3"/>

  <!-- DANCING BARS WATERMARK (TOP-RIGHT) -->
  {{#each watermarkBars}}
  <rect x="{{x}}" y="{{y}}" width="{{width}}" height="{{height}}"
        fill="#666666" rx="1" ry="1"/>
  {{/each}}

  <!-- Audio2 watermark text (TOP-RIGHT) -->
  <text x="{{watermarkText.x}}" y="{{watermarkText.y}}"
        font-family="Roboto, 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif"
        font-size="{{watermarkText.fontSize}}"
        font-weight="300"
        fill="#666666"
        text-anchor="end">Audio2</text>

  <!-- PODCAST NAME - TOP CENTER, uppercase -->
  {{#each podcastNameLines}}
  <text x="{{../centerX}}" y="{{../podcastNameY}}" dy="{{@index}}em" text-anchor="middle" fill="#ffffff"
        font-size="{{../podcastNameSize}}" font-weight="700"
        font-family="Roboto, 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif"
        letter-spacing="{{../podcastNameLetterSpacing}}"
        text-transform="uppercase"
        filter="url(#textShadow)">{{this}}</text>
  {{/each}}

  <!-- EPISODE TITLE - BELOW PODCAST NAME, centered -->
  {{#each episodeTitleLines}}
  <text x="{{../centerX}}" y="{{../episodeTitleY}}" dy="{{@index}}em" text-anchor="middle" fill="#E6E6E6"
        font-size="{{../episodeTitleSize}}" font-weight="400"
        font-family="Roboto, 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif"
        filter="url(#textShadow)">{{this}}</text>
  {{/each}}

  <!-- PODCAST ARTWORK (LEFT SIDE) WITH WHITE BORDER -->
  <!-- White border background (8px thick) -->
  <rect x="{{artworkX}}" y="{{artworkY}}" width="{{artworkSize}}" height="{{artworkSize}}"
        rx="20" fill="#FFFFFF" filter="url(#dropShadow)"/>

  <!-- Inner artwork area (placeholder or actual image will be composited here) -->
  <rect x="{{artworkInnerX}}" y="{{artworkInnerY}}" width="{{artworkInnerSize}}" height="{{artworkInnerSize}}"
        rx="12" fill="#A8D5F2"/>

  <!-- MVP CAPTIONS - RIGHT SIDE, left-aligned, 2 lines max, 32 chars per line -->
  {{#if captionsEnabled}}
  {{#if (eq captionDisplayMode "one-line")}}
  <!-- One-line caption mode -->
  {{#with (lookup captionLines 0)}}
  <text x="{{../captionX}}" y="{{../captionY}}"
        text-anchor="start"
        font-size="64" font-weight="800"
        font-family="Arial, Helvetica, sans-serif"
        filter="url(#textShadow)">
    {{#with (lookup ../captionWords 0)}}
    {{#each this}}
    <tspan fill="{{#if isHighlighted}}#f59e0b{{else}}#ffffff{{/if}}">{{text}} </tspan>
    {{/each}}
    {{else}}
    <tspan fill="#ffffff">{{../this}}</tspan>
    {{/with}}
  </text>
  {{/with}}
  {{else}}
  <!-- Two-line caption mode (default) -->
  {{#each captionLines}}
  <text x="{{../captionX}}" y="{{../captionY}}" dy="{{@index}}em"
        text-anchor="start"
        font-size="64" font-weight="800"
        font-family="Arial, Helvetica, sans-serif"
        filter="url(#textShadow)">
    {{#if ../captionWords}}
    {{#each (lookup ../captionWords @index)}}
    <tspan fill="{{#if isHighlighted}}#f59e0b{{else}}#ffffff{{/if}}">{{text}} </tspan>
    {{/each}}
    {{else}}
    <tspan fill="#ffffff">{{this}}</tspan>
    {{/if}}
  </text>
  {{/each}}
  {{/if}}
  {{/if}}

  <!-- PROGRESS BAR (BOTTOM, FULL WIDTH) -->
  <!-- Background progress bar -->
  <rect x="{{progressBar.x}}" y="{{progressBar.y}}"
        width="{{progressBar.width}}" height="{{progressBar.height}}"
        fill="url(#breathingBackground)"
        rx="6" ry="6"/>

  <!-- Progress fill -->
  <rect x="{{progressBar.x}}" y="{{progressBar.y}}"
        width="{{progressBar.fillWidth}}" height="{{progressBar.height}}"
        fill="url(#progressFill)"
        rx="6" ry="6"/>
</svg>
